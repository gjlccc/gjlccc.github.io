---
title: 2024河南省赛G题题解
date: 2024-05-15 22:29:58
tags: 2024河南省赛
mathjax: true
---

先占个坑，等我博客重建完.

来填坑了

感觉思路对是对的，毕竟题目过了，但是还是不够简单，特判太多了，跟着check出来的一点点改的，才慢慢找齐的

题目只有pdf，地址请点：[2024河南省赛]([Dashboard - 2024 National Invitational of CCPC (Zhengzhou), 2024 CCPC Henan Provincial Collegiate Programming Contest - Codeforces](https://codeforces.com/gym/105158))。

我们只要把下文介绍的的两种构造方案，和特判组合起来就能通过啦。

幸亏这题的 $check$ 十分好写，不然 $vp$ 的时候应该是出不来的。

方案讲解是跟着作者的一步一步构造出来正确答案的过程来的，有些中间部分时有问题的，请先耐心看完，如果还有问题再提出。

## 第一种构造方案

### 使用条件：

在满足 $m \geq \lfloor \frac{n^2}{2} \rfloor +2$​ 时。

最想也最不会出错的一种，可惜范围有限

### 文字描述：

首先进行隔位填 $1$ 使用 $\frac{n^2}{2}+2$ 个雷，来给出一个框架，使得使所有 $0$ 的位置周围的雷的数量都大于 $2$ 那么之后的我们只需要找顺序遍历把剩余 $m - \lfloor \frac{n^2}{2} \rfloor +2$ 个雷填到空的格子里就可以 。

在 $n$ 为奇数的隔位填 $1$ 刚好满足使所有 $0$ 的位置周围的雷的数量都大于 $2$ 。

在 $n$ 偶数时还需填上 $a[1][n]$ 和 $a[n][1]$ 两个格子才能满足。否则这两个格子周围雷的数量刚好是2。

### 图例：

![5X5示例](/pic/方案一示例5X5.png)

![6X6示例](/pic/方案一示例6X6.png)

## 第二种构造方案

### 使用条件：

这是一般性的构造方案，除了第一种构造方案和特判就都用这种的。

感觉这种方案要拿出来的特判太多了，所以我认为这不是一种优秀的方案

### 基本策略

文字+图片描述（感觉分开太难描述了）：

我们将一个十字的放置视作最小单元

![最小的单元](/pic/最小单元.png)

确立基本原则，每次放置要将整个最小单元放置，最右端和最下端超出边界直接删去超出边界那个即可。

我们用其中心点来定位，第一个中心点在 $(2,2)$ ，下一个在 $(2,5)$ ，就这样向后放置直到这一行放不下了，

到下一行从 $(5,2)$ 开始往后放置，以此类推即可。

最小单元放完了，或者未填的 $m$ 个数不足以放置下一个最小单元时

从头开始填充 $m$ 个为 $0$​ 的位置。

$ 5*5 $ 的放置示例：

 ![5*5的放置示例](/pic/方案二5X5示例.png)

$7*7$ 的放置示例:

![7*7的放置示例](/pic/方案二7X7示例.png)

当我们计算个数时只要保证上届能衔接到第一种方案就行，小的部分余下的需要特判的数量不会很多（至少不是会导致写1000行的代码）。

凭借感觉我们就能感觉到 $7*7$ 的时候时上最劣的情况

![7*7上限](/pic/方案二可放置数量分析.png)

黄色的为最小单位组成的框架，蓝色的地方是能填充的地方，一共29个，$29 > 26$ 。

个数足够到达第一种方案

### 针对于错误的改进

#### 错误一：

聪明的你一定想到了，以上方法构造出来的东西是有问题的

假设 $n=10,m=20$ 时根据以上，我们会构造出来这样一张图。

![错误示例一](/pic/方案二示例错误1.png)

在红色格子周围一共 $2$ 个雷。

当时做到这，一下子就蒙了一下，写了真的很久，坚信之前的底子没错只要小修改一下就好，还好改出来了。

#### 修改措施一：

我们从第二行（最小单元的）开始，将最小单元再加上一个，变成六个一组就可以啦，只是特判的东西要再多一点了。

![修改示例二](/pic/方案二示例修改1.png)

绿色的为第二行开始的构造的最小单元。这样红色格子旁边就有3个雷了，问题解决!

#### 错误二：

这是由错误一引发的错误

当 $n=7,m=22$ 时，我们会构造出来这样一张图

![错误示例2](/pic/错误示例2.png)

黄色的时我们填充的单元格，红色的为周围雷的个数为 $2$ 的格子

#### 修改措施二：

直接判断是不是本行最后一个能放置的，如果是，就把右上角那个在当前这个最小单元里的踢出去就好了

![修改示例2](/pic/修改示例2.png)

解决！

#### 错误三：

当最小单元组成的边框所留出来的空格足够，但是遍历的时候将不是雷的直接设置雷的时候会有错误

例如 $n=7 ,m=21$ 时

![错误示例3](/pic/错误示例3.png)

黄色绿色都是填上的格子。会发现明显错误。

#### 修改措施三：

记录最后一次的最小单元放置的中心点位置，

假设为 $(i,j)$ ,那么当遇到点 $(i-2,j+2)$ 时直接换到下一行。

![修改示例3](/pic/修改示例3.png)

黄色和橙色都是放置的雷，

橙色表示最后一个最小单元的中心点，红色为 $(i-2,j+2)$ 。

### 方案二完结

应该没有别的部分了，真的很复杂，虽然代码长度也还好吧。



